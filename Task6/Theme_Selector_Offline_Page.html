<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>THI lihor (Glimmer&Charm)</title>
      <style>
        body {
          transition: background-color 0.5s;
          font-family: Arial, sans-serif;
          margin: 20px;
        }
        .color-picker {
          margin: 20px 0;
        }
      </style>
</head>
      <body>
          <h1>Welcome to My Offline Page</h1>
              <p>This page is cached using a service worker so that it can be accessed offline. You can also choose a background color below, which will be saved and applied automatically on your next visit.</p>

              <div class="color-picker">
                <label for="theme-color">Select Background Color:</label>
                <input type="color" id="theme-color">
              </div>

              <script>
                // Function to apply the saved color
                function applySavedColor() {
                  const savedColor = localStorage.getItem('themeColor');
                  if (savedColor) {
                    document.body.style.backgroundColor = savedColor;
                  }
                }

                // Apply the saved color on page load
                applySavedColor();

                // Event listener for color picker
                document.getElementById('theme-color').addEventListener('input', (event) => {
                  const selectedColor = event.target.value;
                  document.body.style.backgroundColor = selectedColor;
                  localStorage.setItem('themeColor', selectedColor);
                });

                // Register the Service Worker
                if ('serviceWorker' in navigator) {
                  window.addEventListener('load', () => {
                    navigator.serviceWorker.register('service-worker.js')
                            .then((registration) => {
                              console.log('Service Worker registered with scope:', registration.scope);
                            })
                            .catch((error) => {
                              console.log('Service Worker registration failed:', error);
                            });
                  });
                }
              </script>
      </body>
</html>
